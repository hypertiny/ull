<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1">
    <title>&Uacute;ll</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="/main/css/style.css">
    <link rel="shortcut icon" href="/main/images/ull_favicon.png">
    <link rel="icon" href="/main/images/ull_favicon.png">
    <link href="style.css" media="screen" rel="stylesheet" type="text/css" /> 
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="underscore-min.js"></script>
    <script type="text/javascript" src="mustache.js"></script>
    <script type="text/javascript" src="http://stevenlevithan.com/assets/misc/date.format.js"></script>
    <script type="text/javascript">
      var Schedule, now, date, time, on_now, on_next;
      var Schedule = {
        "2012-04-24": {
          "1230-1630": {
            time: "12:30",
            session: "Josh Clark Workshop",
            venue: "Morrison Hotel Printworks 1",
            url: "foursquare://morrison"
          },
          "1400-1600": {
            time: "2pm",
            session: "Horace Dediu Workshop",
            venue: "Morrison Hotel Printworks 2",
            url: "foursquare://morrison"
          },
          "1900-1930": {
            time: "7pm",
            session: "Meet at Sugar Club",
            venue: "The Sugar Club",
            url: "foursquare://sugarclub"
          },
          "1930-1945": {
            time: "7:30pm",
            session: "Opening Remarks",
            venue: "The Sugar Club",
            url: "foursquare://sugarclub"
          },
          "1945-2045": {
            time: "7:45pm",
            session: "Horace Dediu Keynote",
            venue: "The Sugar Club",
            url: "foursquare://sugarclub"
          },
          "1950-2100": {
            time: "7:50pm",
            session: "Andy Delcambre (Engine Yard)",
            venue: "The Sugar Club",
            url: "foursquare://sugarclub"
          },
          "2105-2155": {
            time: "9:05pm",
            session: "Aral Balkan Keynote",
            venue: "The Sugar Club",
            url: "foursquare://sugarclub"
          },
          "2200-2300": {
            time: "10pm",
            session: "The Original Rude Boys",
            venue: "The Sugar Club",
            url: "foursquare://sugarclub"
          }
        }
      }

      load_schedule = function(){
        now = new Date()
        date = now.format('yyyy-mm-dd')
        time = now.format('HHMM')

        on_now = _.select(Schedule[date], function(value, key){
          var start_end, start, end;
          start_end = key.split('-');
          start = start_end[0];
          end = start_end[1];

          if(parseInt(start) <= parseInt(time) && parseInt(end) >= parseInt(time))
          {
            return value;
          }
        })
        on_next = _.select(Schedule[date], function(value, key){
          var start_end, start, end;
          start_end = key.split('-');
          start = start_end[0];
          end = start_end[1];

          if(parseInt(start) > parseInt(time))
          {
            return value;
          }
        })[0];

        jQuery(function(){
          for(i=0; i<on_now.length;i++)
          {
            this_entry = on_now[i];
            $('#now').html(
              Mustache.render($('#now-template').html(), this_entry)
            )
          }
          $('#next').html(
            Mustache.render($('#next-template').html(), on_next)
          )
        })
      }

      setInterval(load_schedule, 10000)
      load_schedule();
    </script>
  </head>
  <body>
    <nav>
      <span class="ull-logo"></span>
    </nav>
    
    <hr class="section-line" />
    <h2 class="section-title">Schedule</h2>
    
    <div class="now-next">
      <p>Click the the now or next item below to be brought to the foursquare page or visit the google maps URL at the bottom</p>

      <div id="now">
        
      </div>

      <div id="next">
        
      </div><!-- #next -->
      
      <script type="text/html" id="now-template">
        <a href="{{url}}" class="main-container now clearfix">
        <h3 class="title">Now</h3>
        <span class="name-place now">
          <h4>{{session}}</h4>
          <span>{{venue}}</span>
        </span>
      </a>
      </script>
      
      <script type="text/html" id="next-template">
        <a href="{{url}}" class="main-container clearfix">
        <h3 class="title">{{time}}</h3>
        <span class="name-place">
          <h4>{{session}}</h4>
          <span>{{venue}}</span>
        </span>
      </a>
      </script>
      
    </div>
    
    <hr class="section-line" />
    <h2 class="section-title">Venue List</h2>
    
    
    <p>Either follow the main link to a full google map of all the conference venues or choose from foursquare or google maps for individual venues</p>
        <a href="http://maps.google.com/maps/ms?msid=211915329798909181589.0004be5a4e737bef5b384&msa=0&ll=53.341431,-6.273623&spn=0.025725,0.077162&z=13
        " class="event-map">Full Conference Map</a>
    <ul class="maps">
          <li>
            <h3>Sugar Club</h3>
            <a href="foursquare://venues/4ade0efff964a520b47021e3" class="foursquare ir"></a>
          </li>
          
          <li>
            <h3>Dublin Castle</h3>
            <a href="foursquare://venues/4ade0f13f964a5200e7121e3" class="foursquare ir"></a>
          </li>   
          
          <li>
            <h3>Bull & Castle</h3>
            <a href="foursquare://venues/4b044c50f964a5200b5322e3" class="foursquare ir"></a>
          </li>
          
          <li class="clearfix">
            <h3>Royal Hospital Kilmainham</h3>  
            <a href="foursquare://venues/4ade0f54f964a520fd7121e3" class="foursquare ir"></a>
            <a href="http://maps.google.ie/maps/place?q=Royal+hospital+kilmainham&hl=en&cid=2175169287680674088" class="gmaps ir"></a>
          </li>
          
          <li>
            <h3>Odessa Club</h3>
            <a href="foursquare://venues/4b546f7bf964a52032bb27e3" class="foursquare ir"></a>
          </li>
    </ul>
    
    <a href="#" class="main-container clearfix full">
      <h4>Load Full Schedule</h4>
    </a>
    
  </body>
</html>

